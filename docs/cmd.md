## cmd

#### 参考

```shell
https://www.cnblogs.com/peida/archive/2012/12/05/2803591.html
```



#### ls 命令

```shell
ls [选项][目录名]
```

| 参数 | 描述                                                         |
| ---- | ------------------------------------------------------------ |
| -a   | –all 列出目录下的所有文件，包括以 . 开头的隐含文件           |
| -l   | 除了文件名之外，还将文件的权限、所有者、文件大小等信息详细列出来 |
| -h   | –human-readable 以容易理解的格式列出文件大小（例如 1K 234M 2G) |
| -t   | 以文件修改时间排序                                           |

```shell
ls -a -l /home
ls -al /home
ls -l d*
ls -alh /home

```

#### cd 命令

```shell
cd [目录名]
```

```shell
cd  /
cd ..
cd ~
cd -
```

#### pwd 命令

```shell
pwd [选项]
```

| 参数 | 描述                                       |
| ---- | ------------------------------------------ |
| -P   | 显示实际物理路径，而非使用连接（link）路径 |
| -L   | 当目录为连接路径时，显示连接路径           |

```shell
pwd
pwd -P
pwd -L
```

#### mkdir 命令

```shell
mkdir [选项] 目录
```

| 参数           | 描述                                                         |
| -------------- | ------------------------------------------------------------ |
| -m --mode=模式 | 设定权限<模式>                                               |
| -p --parents   | 可以是一个路径名称。若路径中的某些目录尚不存在，加上此选项后，系统将自动建立好那些尚不存在的目录，即一次可以建立多个目录 |
| -v --verbose   | 每次创建新目录都显示信息                                     |

```shell
mkdir -p  zhou/test
mkdir -m 777  zhou
mkdir -vp zhou/test
mkdir -vp shiyanlou/{lib/,bin/,doc/{info,product}}
tree shiyanlou/
```

#### rm 命令

```shell
rm [选项] 文件或目录
```

| 参数             | 描述                                               |
| ---------------- | -------------------------------------------------- |
| -f --force       | 忽略不存在的文件，从不给出提示                     |
| -i --interactive | 进行交互式删除                                     |
| -r --recursive   | 指示 rm 将参数中列出的全部目录和子目录均递归地删除 |
| -v --verbose     | 详细显示进行的步骤                                 |

```shell
rm shiyanlou.log
rm *.log 或 rm -i *.log
```

```shell
myrm(){
    D=/tmp/$(date "+%Y%m%d%H%M%S")
    mkdir -p $D
    mv "$@" $D && echo "moved to $D ok"
 }
```



#### mv 命令

```shell
mv [选项] 源文件或目录 目标文件或目录
```

| 参数             | 描述                                                         |
| ---------------- | ------------------------------------------------------------ |
| -b --back        | 若需覆盖文件，则覆盖前先行备份                               |
| -f --force       | 如果目标文件已经存在，不会询问而直接覆盖                     |
| -i --interactive | 若目标文件已经存在时，就会询问是否覆盖                       |
| -u --update      | 若目标文件已经存在，且源文件比较新，才会更新                 |
| -t --target      | 该选项适用于移动多个源文件到一个目录的情况，此时目标目录在前，源文件在后 |

```shell
mv shiyanlou.log zhou.log
mv zhou.log test
mv -i a.txt test1
```



#### cp 命令

```shell
cp [选项] 源文件 目录 cp [选项] -t 目录 源文件
```

| 参数                  | 描述                                                         |
| --------------------- | ------------------------------------------------------------ |
| -t --target-directory | 指定目标目录                                                 |
| -i --interactive      | 覆盖前询问（使前面的 -n 选项失效）                           |
| -n --no-clobber       | 不要覆盖已存在的文件（使前面的 -i 选项失效）                 |
| -s --symbolic-link    | 对源文件建立符号链接，而非复制文件                           |
| -f --force            | 强行复制文件或目录，不论目的文件或目录是否已经存在           |
| -u --update           | 使用这项参数之后，只会在源文件的修改时间较目的文件更新时，或是对应的目的文件并不存在，才复制文件 |

```shell
cp -s shiyanlou.log syl.log
cp -s shiyanlou.log syl.log
cp -iu test1/* test2
```



#### cat 命令

cat 命令的功能是将文件或标准输入组合输出到标准输出。

```shell
cat [选项][文件]
```

| 参数                  | 描述                                              |
| --------------------- | ------------------------------------------------- |
| -A --show-all         | 等价于 -vET                                       |
| -b --number-nonblank  | 对非空输出行编号                                  |
| -e                    | 等价于 -vE                                        |
| -E --show-ends        | 在每行结束处显示 $                                |
| -n --number           | 对输出的所有行编号，由 1 开始对所有输出的行数编号 |
| -s --squeeze-blank    | 有连续两行以上的空白行，就代换为一行的空白行      |
| -t                    | 与 -vT 等价                                       |
| -T --show-tabs        | 将跳格字符显示为 ^I                               |
| -u                    | （被忽略）                                        |
| -v --show-nonprinting | 使用 ^ 和 M- 引用，除了 LFD 和 TAB 之外           |

```shell
cat -n shiyanlou.log > zhou.log
cat -ns shiyanlou.log > zhou.log
tac  zhou.log
```



#### nl 命令

nl 命令在 linux 系统中用来计算文件中的行号。

nl 可以将行号做较多的显示设计，包括位数与是否自动补齐 0 等等的功能。

```shell
nl [选项][文件]
```

| 参数  | 描述                                              |
| ----- | ------------------------------------------------- |
| -b    | 指定行号指定的方式，主要有两种：                  |
| -b a  | 表示不论是否为空行，也同样列出行号（类似 cat -n） |
| -b t  | 如果有空行，空的那一行不要列出行号（默认值）      |
| -n    | 列出行号表示的方法，主要有三种：                  |
| -n ln | 行号在屏幕的最左方显示                            |
| -n rn | 行号在自己栏位的最右方显示，且不加 0              |
| -n rz | 行号在自己栏位的最右方显示，且加 0                |
| -w    | 行号栏位的占用的位数                              |

```shell
nl -b t shiyanlou.log
nl -n ln shiyanlou.log
nl -n rn shiyanlou.log
nl -n rz shiyanlou.log

nl -n rz -w 3 shiyanlou.log


```

#### more 命令

more 命令，功能类似 cat ，cat 命令是将整个文件的内容从上到下显示在屏幕上。 more 命令会一页一页的显示，方便使用者逐页阅读，而最基本的指令就是**按空格键（space）往下一页显示**，**按 B 键就会往回（back）一页显示**，而且还有搜寻字串的功能。more 命令从前向后读取文件，因此在启动时就加载整个文件。

```shell
more [选项] 文件
```

| 参数      | 描述                                                         |
| --------- | ------------------------------------------------------------ |
| +n        | 从笫 n 行开始显示                                            |
| -n        | 定义屏幕大小为 n 行                                          |
| +/pattern | 在每个档案显示前搜寻该字串（pattern），然后从该字串前两行之后开始显示 |
| -c        | 从顶部清屏，然后显示                                         |
| -d        | 提示“Press space to continue，’q’ to quiet”，禁用响铃功能    |
| -p        | 通过清除窗口而不是滚屏来对文件进行换页，与-c 选项相似        |
| -s        | 把连续的多个空行显示为一行                                   |
| -u        | 把文件内容中的下划线去掉                                     |

| 符号   | 描述             |
| ------ | ---------------- |
| =      | 输出当前行的行号 |
| q      | 退出 more        |
| 空格键 | 向下滚动一屏     |
| b      | 返回上一屏       |

```shell
more +5 shiyanlou.log
more +/g shiyanlou.log
ll /etc | more -10

```

#### less 命令

```shell
less [选项] 文件
```

| 参数 | 描述                                                 |
| ---- | ---------------------------------------------------- |
| -e   | 当文件显示结束后，自动离开                           |
| -f   | 强迫打开特殊文件，例如外围设备代号、目录和二进制文件 |
| -i   | 忽略搜索时的大小写                                   |
| -m   | 显示类似 more 命令的百分比                           |
| -N   | 显示每行的行号                                       |
| -s   | 显示连续空行为一行                                   |

| 符号    | 描述                                 |
| ------- | ------------------------------------ |
| /字符串 | 向下搜索“字符串”的功能               |
| ?字符串 | 向上搜索“字符串”的功能               |
| n       | 重复前一个搜索（与 / 或 ? 有关）     |
| N       | 反向重复前一个搜索（与 / 或 ? 有关） |
| b       | 向前翻一页                           |
| d       | 向后翻半页                           |
| q       | 退出 less 命令                       |
| 空格键  | 向后翻一页                           |
| 向上键  | 向上翻动一行                         |
| 向下键  | 向下翻动一行                         |

```shell
less -N shiyanlou.log

less shiyanlou.log
/shiyanlou

ps -f | less
```

#### less 与 cat 和 more 的区别

**cat 命令功能**：用于显示整个文件的内容，因为单独使用没有翻页功能，所以经常和 more 命令搭配使用，cat 命令还有一个可以将数个文件合并成一个文件的功能。

**more 命令功能**：让画面在显示满一页时暂停，此时可按空格健继续显示下一个画面，或按 q 键停止显示。

**less 命令功能**：less 命令的用法与 more 命令类似，也可以用来浏览超过一页的文件。所不同的是 less 命令除了可以按空格键向下显示文件外，还可以利用上下键来滚动文件。当要结束浏览时，只要在 less 命令的提示符“：”下按 q 键即可。

#### head 命令

```shell
head [选项][文件]
```

| 参数     | 描述       |
| -------- | ---------- |
| -q       | 隐藏文件名 |
| -v       | 显示文件名 |
| -c<字节> | 显示字节数 |
| -n<行数> | 显示的行数 |

```
head -n 5 shiyanlou.log
head -n 5 shiyanlou.log  zhou.log

```

#### tail 命令

```
tail [选项][文件]
```

| 参数     | 描述               |
| -------- | ------------------ |
| -f       | 循环读取           |
| -q       | 不显示处理信息     |
| -v       | 显示详细的处理信息 |
| -c<字节> | 显示的字节数       |
| -n<行数> | 显示行数           |

```
tail -n 5 shiyanlou.log
tail -n 5 -f shiyanlou.log
```

#### which 命令

which 命令的作用是，在 PATH 变量指定的路径中搜索可执行文件的所在位置。它一般用来确认系统中是否安装了指定的软件。

```
which 可执行文件名称
```

```shell
which gcc
which cd

```

### 到底什么是命令？

命令可以是下面四种形式之一：

1. 是一个可执行程序，就像我们所看到的位于目录`/usr/bin`中的文件一样
2. 是一个内建于 shell 自身的命令。
3. 是一个 shell 函数。
4. 是一个命令别名。

#### whereis 命令

whereis 命令主要用于定位可执行文件、源代码文件和帮助文件在文件系统中的位置。whereis 命令还具有搜索源代码、指定备用搜索路径和搜索不寻常项的功能。



在一个数据库中（/var/lib/mlocate/mlocate.db）查询。这个数据库是 Linux 系统自动创建的，包含有本地所有文件的信息，并且每天通过自动执行 updatedb 命令更新一次。



```shell
whereis [选项] 文件
```

| 参数 | 描述                                                         |
| ---- | ------------------------------------------------------------ |
| -b   | 定位可执行文件                                               |
| -m   | 定位帮助文件                                                 |
| -s   | 定位源代码文件                                               |
| -u   | 搜索默认路径下除可执行文件、源代码文件和帮助文件以外的其它文件 |
| -B   | 指定搜索可执行文件的路径                                     |
| -M   | 指定搜索帮助文件的路径                                       |
| -S   | 指定搜索源代码文件的路径                                     |

```shell
whereis -b gcc
whereis -m gcc
whereis -s gcc
```

#### locate 命令

locate 命令跟 whereis 命令类似，且它们使用的是相同的数据库。

但 whereis 命令只能搜索可执行文件、联机帮助文件和源代码文件，如果要获得更全面的搜索结果，可以使用 locate 命令。

```shell
locate [选项][搜索字符串]
```

| 参数 | 描述                           |
| ---- | ------------------------------ |
| -q   | 安静模式，不会显示任何错误讯息 |
| -n   | 至多显示 n 个输出              |
| -r   | 使用正则表达式做寻找的条件     |
| -V   | 显示版本信息                   |

```
locate /etc/sh
locate /etc/*lou*
```

#### find命令

find 命令主要作用是沿着文件层次结构向下遍历，匹配符合条件的文件，并执行相应的操作。

```shell
find [选项][搜索路径] [表达式]
```

